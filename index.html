<!DOCTYPE html>
<html>
<head>
  <title>Digital VCard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body{
      margin:0;
      font-family:Arial, sans-serif;
      background:#e9eef6;
      display:flex;
      justify-content:center;
    }
    .vcard{
      width:100%;
      max-width:420px;
      background:#f2f5fb;
      min-height:100vh;
    }

    /* HERO */
    .hero{
      background:#5b8cff;
      color:#fff;
      text-align:center;
      padding:35px 20px 25px;
    }
    .hero img{
      width:110px;height:110px;
      border-radius:50%;
      border:4px solid #fff;
      object-fit:cover;
    }
    .hero h2{margin:10px 0 5px}
    .hero p{margin:2px;font-size:14px;opacity:.9}

    /* ICON ACTIONS */
    .icon-actions{
      background:#fff;
      margin:-25px 15px 15px;
      border-radius:20px;
      padding:15px;
      display:flex;
      justify-content:space-around;
      box-shadow:0 4px 10px rgba(0,0,0,.1)
    }
    .icon-actions a{
      text-decoration:none;
      font-size:22px;
      color:#5b8cff;
    }

    /* CARD */
    .card{
      background:#fff;
      margin:15px;
      padding:18px;
      border-radius:18px;
      box-shadow:0 4px 10px rgba(0,0,0,.08)
    }
    .card h3{margin-top:0}

    /* HOURS */
    .hours{
      list-style:none;padding:0;margin:0
    }
    .hours li{
      display:flex;
      justify-content:space-between;
      padding:6px 0;
      border-bottom:1px solid #eee;
      font-size:14px
    }

    /* GALLERY */
    .gallery{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:8px;
    }
    .gallery img{
      width:100%;
      border-radius:10px;
      object-fit:cover;
    }

    iframe{
      width:100%;
      border-radius:15px;
      border:0;
    }

    /* LINKS */
    .links a{
      display:flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      color:#333;
      padding:10px;
      border-radius:12px;
      background:#f2f5fb;
      margin-bottom:8px;
      font-size:14px;
    }
    .icon{
      width:32px;height:32px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:16px;
      color:#fff;
    }
    .fb{background:#1877f2}
    .ig{background:#e1306c}
    .wa{background:#25d366}
    .li{background:#0077b5}
    .web{background:#5b8cff}

/* PROFESSIONAL QUICK ICON COLORS */
.icon-actions i{
  font-size:22px;
}

.icon-actions a:nth-child(1) i{ color:#5b8cff; }   /* Call */
.icon-actions a:nth-child(2) i{ color:#25d366; }   /* WhatsApp */
.icon-actions a:nth-child(3) i{ color:#e1306c; }   /* Instagram */
.icon-actions a:nth-child(4) i{ color:#1877f2; }   /* Facebook */
    
  </style>
</head>

<body>
<div class="vcard">

<!-- HERO -->
<div class="hero">
  <img src="https://via.placeholder.com/150">
  <h2>Leslie Murphy</h2>
  <p>Financial Manager</p>
  <p>AceFinance</p>
</div>

<!-- QUICK ICONS -->
<div class="icon-actions">
  <a href="tel:+1234567890" title="Call">
    <i class="fa-solid fa-phone"></i>
  </a>

  <a href="https://wa.me/1234567890" title="WhatsApp">
    <i class="fa-brands fa-whatsapp"></i>
  </a>

  <a href="https://instagram.com" title="Instagram">
    <i class="fa-brands fa-instagram"></i>
  </a>

  <a href="https://facebook.com" title="Facebook">
    <i class="fa-brands fa-facebook-f"></i>
  </a>
</div>


  <!-- ADD TO CONTACT -->
<div class="card">
  <h3>Save Contact</h3>
  <button onclick="saveContact()" style="
    width:100%;padding:12px;border:0;
    border-radius:12px;
    background:#5b8cff;color:#fff;
    font-size:16px">
    ‚ûï Add to Contacts
  </button>
</div>

<!-- ABOUT -->
<div class="card">
  <h3>About Me</h3>
  <p>
    I am Leslie, working as marketing manager at AceFinance.
  </p>
</div>

<!-- CONTACT -->
<div class="card">
  <h3>Contact</h3>
  <p><b>Name:</b> Leslie Murphy</p>
  <p><b>Address:</b> New York, USA</p>
  <p><b>WhatsApp:</b> +1 234 567 890</p>

  <h4>Hours of Operation</h4>
  <ul class="hours">
    <li><span>Sunday</span><span>10 am ‚Äì 12:30 am</span></li>
    <li><span>Monday</span><span>3 ‚Äì 7 pm</span></li>
    <li><span>Tuesday</span><span>3 ‚Äì 7 pm</span></li>
    <li><span>Wednesday</span><span>3 ‚Äì 7 pm</span></li>
    <li><span>Thursday</span><span>3 ‚Äì 7 pm</span></li>
    <li><span>Friday</span><span>3 am ‚Äì 7 pm</span></li>
    <li><span>Saturday</span><span>3 ‚Äì 7 pm</span></li>
  </ul>

  <h4>Location</h4>
  <iframe height="200"
    src="https://www.google.com/maps?q=New%20York&output=embed">
  </iframe>
</div>

<!-- LINKS -->
<div class="card">
  <h3>Links</h3>
  <div class="links">
    <a href="#"><span class="icon fb">f</span>Facebook</a>
    <a href="https://instagram.com" target="_blank">
  <span class="icon ig">
    <i class="fa-brands fa-instagram"></i>
  </span>
  Instagram
</a>
    <a href="#"><span class="icon li">in</span>LinkedIn</a>
    <a href="#"><span class="icon web">üåê</span>Website</a>
    <a href="#"><span class="icon web">üîó</span>Custom Link</a>
  </div>
  
<!-- GALLERY -->
<div class="card">
  <h3>Gallery</h3>
  <div class="gallery">
    <img src="https://via.placeholder.com/300">
    <img src="https://via.placeholder.com/301">
    <img src="https://via.placeholder.com/302">
  </div>
</div>

<!-- VIDEO -->
<div class="card">
  <h3>Video</h3>
  <iframe height="200"
    src="https://www.youtube.com/embed/dQw4w9WgXcQ">
  </iframe>
</div>


</div>

</div>

<script>
/* ===============================
   GLOBAL DATA HOLDER
================================ */
let VCARD_DATA = null;

/* ===============================
   CONFIG
================================ */
const API_URL = "https://script.google.com/macros/s/AKfycbx2KbdEUTvLlF1FNygSi6Ft-D1D_kjXZ64VQ9i7Ybi8s4lbbDv6bpuqURxj4xW85ktj5A/exec";

/* ===============================
   GET CLIENT ID FROM URL
================================ */
const params = new URLSearchParams(window.location.search);
const clientId = params.get("id");

if (!clientId) {
  alert("Client ID missing in URL. Example: ?id=101");
}

/* ===============================
   FETCH DATA FROM GOOGLE SHEET
================================ */
fetch(API_URL + "?id=" + clientId)
  .then(res => res.json())
  .then(data => {
    if (data.error) {
      alert(data.error);
      return;
    }

    VCARD_DATA = data;

    /* ===== HERO ===== */
    document.querySelector(".hero img").src = data.photo_url || "";
    document.querySelector(".hero h2").innerText = data.full_name || "";
    document.querySelector(".hero p:nth-of-type(1)").innerText = data.title || "";
    document.querySelector(".hero p:nth-of-type(2)").innerText = data.company || "";

    /* ===== ABOUT ===== */
    document.getElementById("about").innerText = data.about || "";

    /* ===== CONTACT ===== */
    document.getElementById("fullName").innerText = data.full_name || "";
    document.getElementById("address").innerText = data.address || "";
    document.getElementById("whatsappText").innerText = data.whatsapp || "";

    /* ===== QUICK ICONS ===== */
    document.getElementById("callBtn").href =
      data.phone ? "tel:" + data.phone : "#";

    document.getElementById("whatsappBtn").href =
      data.whatsapp ? "https://wa.me/" + data.whatsapp.replace(/\D/g,"") : "#";

    document.getElementById("instagramBtn").href = data.instagram || "#";
    document.getElementById("facebookBtn").href = data.facebook || "#";

    /* ===== HOURS OF OPERATION ===== */
    const hoursList = document.getElementById("hoursList");
    hoursList.innerHTML = "";

    const hours = {
      Sunday: data.hours_sunday,
      Monday: data.hours_monday,
      Tuesday: data.hours_tuesday,
      Wednesday: data.hours_wednesday,
      Thursday: data.hours_thursday,
      Friday: data.hours_friday,
      Saturday: data.hours_saturday
    };

    for (let day in hours) {
      hoursList.innerHTML += `
        <li>
          <span>${day}</span>
          <span>${hours[day] || ""}</span>
        </li>`;
    }

    /* ===== MAP ===== */
    if (data.map_iframe) {
      document.getElementById("mapBox").innerHTML = data.map_iframe;
    }

    /* ===== LINKS ===== */
    const linksDiv = document.querySelector(".links");
    linksDiv.innerHTML = "";

    if (data.whatsapp)
      linksDiv.innerHTML += linkItem("WhatsApp", "https://wa.me/" + data.whatsapp.replace(/\D/g,""), "fa-whatsapp", "wa");

    if (data.instagram)
      linksDiv.innerHTML += linkItem("Instagram", data.instagram, "fa-instagram", "ig");

    if (data.facebook)
      linksDiv.innerHTML += linkItem("Facebook", data.facebook, "fa-facebook-f", "fb");

    if (data.linkedin)
      linksDiv.innerHTML += linkItem("LinkedIn", data.linkedin, "fa-linkedin-in", "li");

    if (data.website)
      linksDiv.innerHTML += linkItem("Website", data.website, "fa-globe", "web");

    if (data.custom1_url)
      linksDiv.innerHTML += linkItem(data.custom1_label || "Link", data.custom1_url, "fa-link", "custom");

    if (data.custom2_url)
      linksDiv.innerHTML += linkItem(data.custom2_label || "Link", data.custom2_url, "fa-link", "custom");

    /* ===== GALLERY ===== */
    const gallery = document.querySelector(".gallery");
    gallery.innerHTML = "";

    ["gallery_1","gallery_2","gallery_3","gallery_4"].forEach(key => {
      if (data[key]) {
        gallery.innerHTML += `<img src="${data[key]}">`;
      }
    });

    /* ===== VIDEO ===== */
    if (data.video_url) {
      document.getElementById("videoFrame").src = data.video_url;
    }
  });

/* ===============================
   LINK ITEM HELPER
================================ */
function linkItem(label, url, icon, color){
  return `
    <a href="${url}" target="_blank">
      <span class="icon ${color}">
        <i class="fa-brands ${icon}"></i>
      </span>
      ${label}
    </a>`;
}

/* ===============================
   ADD TO CONTACT (VCF)
================================ */
function saveContact(){

  if (!VCARD_DATA) {
    alert("Contact data not loaded yet");
    return;
  }

  const vcf = `BEGIN:VCARD
VERSION:3.0
FN:${VCARD_DATA.full_name || ""}
ORG:${VCARD_DATA.company || ""}
TITLE:${VCARD_DATA.title || ""}
TEL:${VCARD_DATA.phone || ""}
EMAIL:${VCARD_DATA.email || ""}
ADR:${VCARD_DATA.address || ""}
END:VCARD`;

  const blob = new Blob([vcf], { type: "text/vcard" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = (VCARD_DATA.full_name || "contact").replace(/\s+/g,"_") + ".vcf";
  a.click();
}
</script>


</body>
</html>
